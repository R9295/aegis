<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Add Note  |  name_of_user</title>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->

      <link rel='stylesheet prefetch' href='https://cdnjs.cloudflare.com/ajax/libs/uikit/3.0.0-beta.30/css/uikit.min.css'>
    <link href="static/css/add_note.css" type="text/css" rel="stylesheet">
    <link href="static/css/common.css" type="text/css" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/simplemde/1.11.2/simplemde.min.css">
  </head>
  <body>
    <nav class="uk-navbar-container uk-navbar-transparent" uk-navbar>
            

            <div class="uk-navbar-left">
                <ul class="uk-navbar-nav">
                    <li><a href="#">{{.user}}@Aegis</a></li>
                </ul>
                <ul class="uk-navbar-nav">
                    <li><a href="/view_notes">Home</a></li>
                </ul>
                
            </div>


            <div class="uk-navbar-center">
                <ul class="uk-navbar-nav">
                    <li class="uk-active"><a href="#">Add Note</a></li>
                </ul>
            </div>

             <div class="uk-navbar-right">
                <ul class="uk-navbar-nav">
                    <li><a href="#">Logout</a></li>
                </ul>
            </div>

        </nav>
        
    
    
    <br><br>
      
    <div class="uk-container uk-container-small">
      
    
    <div align="center">
      <label for="name">Title</label>
      <input type="text" id="name" class="uk-input uk-form-width-large">
      <br>
      <br>
      Tag:<input class="uk-input uk-form-width-medium" type="text" placeholder="None" id="tag">

    </div>
    <br><br>
    <div>
     
    
    <button class="uk-button uk-button-default" onclick="set_type('text')">Text</button>
    <button class="uk-button uk-button-default" onclick="set_type('audio')">Audio</button>
    <br><br>

    

     <div id="input_div">
        <br><br>
       <textarea name="" rows="15" id="input"></textarea>
      </div> 

      </div>

     
    </div>
    <div align="right">
    <br><br>
      <br><br>

    
    <button class="uk-button uk-button-primary" onclick="post_data()">Save</button>
    <button class="uk-button uk-button-default">Discard</button>
    </div>
    <br><br>
    </div>

    

    <script src="https://code.jquery.com/jquery-3.2.1.min.js" crossorigin="anonymous"></script>
  <script src='https://cdnjs.cloudflare.com/ajax/libs/uikit/3.0.0-beta.30/js/uikit.min.js'></script>
<script src='https://cdnjs.cloudflare.com/ajax/libs/uikit/3.0.0-beta.30/js/uikit-icons.min.js'></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/simplemde/1.11.2/simplemde.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/js-cookie/2.1.3/js.cookie.min.js"></script>
  <script>


$("#drawing_div").hide()
$("#input_div").hide()
var notetype = "none"

 
function note_type(notetype){
  if (notetype === 'text'){
    $("#input_div").show()
  }
  if (notetype === 'audio'){
    $("#input_div").hide()
    console.log("still to be introduced")
}

}  
function set_type(notetype){
  window.notetype = notetype
  note_type(notetype)
} 

var simplemde = new SimpleMDE({
  element: document.getElementById("input"),
  spellChecker:false
});
 
//Gathering form data,encrypting and posting
function post_data(){
  //Note Type:
  notetype = window.notetype
    
    //If text
  if (notetype === 'text'){
      
      //set post data
      var data ={}
      data['note'] = simplemde.value()
      data['title'] = $("#name").val()
      data['type'] = notetype
      if ($("#tag").val() == ''){
        data['tag'] = 'None'
              }
      if ($("#tag").val() != ''){
        data['tag'] = $("#tag").val()
      }
      
        $.ajax({
        type: "POST",
        url: "/add_note",
        contentType: 'application/json',
        data: JSON.stringify(data),
        dataType: 'json',
        success: function success(data){
        UIkit.notification("<span uk-icon='icon: check'></span> Successfully added note");


  }
    

  });
}
}
</script>
  </body>
</html>